 "use strict";(globalThis["webpackChunkwehlo_app"]=globalThis["webpackChunkwehlo_app"]||[]).push([[717],{5717:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});a(310),a(5962),a(6724);var l=a(1758),r=a(8790);const o={id:"map",ref:"mapContainer",style:{height:"calc(100vh - 89px)",width:"100%"}},i={class:"text-h6"},s={class:"row"},d={class:"col-3 self-center q-pa-sm text-right"},n=["src"],c={class:"row"},u={class:"col-3 self-center q-pa-sm text-right"},_={class:"col-12 q-mb-sm q-pa-md"},p={class:"col-12 q-px-md q-pt-md"},m={key:0,class:"col-12 q-px-sm q-pb-sm"},b={class:"row"},g={class:"col-3 self-center q-pa-sm text-right"};function y(e,t,a,y,h,k){const v=(0,l.g2)("q-fab-action"),f=(0,l.g2)("q-fab"),x=(0,l.g2)("q-page-sticky"),w=(0,l.g2)("q-page"),W=(0,l.g2)("q-space"),F=(0,l.g2)("q-btn"),S=(0,l.g2)("q-card-section"),L=(0,l.g2)("q-separator"),N=(0,l.g2)("MapPopup"),Q=(0,l.g2)("q-card"),O=(0,l.g2)("q-dialog"),X=(0,l.g2)("q-radio"),J=(0,l.g2)("q-item-section"),q=(0,l.g2)("q-item-label"),C=(0,l.g2)("q-item"),I=(0,l.g2)("q-icon"),V=(0,l.g2)("q-scroll-area"),A=(0,l.g2)("q-drawer"),z=(0,l.g2)("q-input"),D=(0,l.g2)("q-range"),M=(0,l.g2)("q-list"),E=(0,l.g2)("q-img"),P=(0,l.gN)("ripple");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(w,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",o,[(0,l.bF)(x,{position:"bottom-left",offset:[18,18],style:{"z-index":"9999999999"}},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:h.menu.show,"onUpdate:modelValue":t[3]||(t[3]=e=>h.menu.show=e),label:"Menu","vertical-actions-align":"left",color:"secondary",icon:"menu","text-color":"white",padding:"sm",direction:"up"},{default:(0,l.k6)((()=>[(0,l.bF)(v,{padding:"5px","external-label":"",color:"white",label:"Map",onClick:t[0]||(t[0]=e=>{h.menu.sensors.drawer=!1,h.menu.map.drawer=!0})},{default:(0,l.k6)((()=>t[16]||(t[16]=[(0,l.Lk)("img",{src:"/map-icon.png",width:"35px"},null,-1)]))),_:1}),(0,l.bF)(v,{padding:"5px","external-label":"",color:"white",label:"Search",onClick:t[1]||(t[1]=e=>h.search.drawer=!0)},{default:(0,l.k6)((()=>t[17]||(t[17]=[(0,l.Lk)("img",{src:"/search-icon.png",width:"35px"},null,-1)]))),_:1}),(0,l.bF)(v,{padding:"5px","external-label":"",color:"white",label:"Sensors",onClick:t[2]||(t[2]=e=>{h.menu.map.drawer=!1,h.menu.sensors.drawer=!0})},{default:(0,l.k6)((()=>t[18]||(t[18]=[(0,l.Lk)("img",{src:"/sensors-icon.png",width:"35px"},null,-1)]))),_:1})])),_:1},8,["modelValue"])])),_:1})],512)])),_:1}),(0,l.bF)(O,{modelValue:h.dialog.open,"onUpdate:modelValue":t[5]||(t[5]=e=>h.dialog.open=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,l.k6)((()=>[(0,l.bF)(Q,{style:{width:"420px","max-width":"95vw"}},{default:(0,l.k6)((()=>[(0,l.bF)(S,{class:"row items-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",i,(0,r.v_)(h.dialog.payload?.name||"Station"),1),(0,l.bF)(W),(0,l.bF)(F,{icon:"close",flat:"",round:"",dense:"",onClick:t[4]||(t[4]=e=>h.dialog.open=!1)})])),_:1}),(0,l.bF)(L),(0,l.bF)(S,{style:{padding:"0"}},{default:(0,l.k6)((()=>[h.dialog.payload?((0,l.uX)(),(0,l.Wv)(N,{key:0,name:h.dialog.payload.name,uuid:h.dialog.payload.uuid,sensor:h.menu.sensors.selected,data:h.dialog.payload},null,8,["name","uuid","sensor","data"])):(0,l.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:h.menu.map.drawer,"onUpdate:modelValue":t[8]||(t[8]=e=>h.menu.map.drawer=e),width:300,elevated:"",side:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{class:"fit"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",s,[t[19]||(t[19]=(0,l.Lk)("div",{class:"q-px-md col-9 self-center q-py-sm text-weight-medium text-h6 text-grey-8"}," Map ",-1)),(0,l.Lk)("div",d,[(0,l.bF)(F,{icon:"close",flat:"",onClick:t[6]||(t[6]=e=>h.menu.map.drawer=!1)})])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.menu.map.options,(e=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{key:e.label,tag:"label",dense:"",class:(0,r.C4)(["q-py-sm text-weight-medium",h.menu.map.style===e.value?"bg-grey-4":""]),onClick:t=>{h.menu.map.style=e.value,k.changeStyle()}},{default:(0,l.k6)((()=>[(0,l.bF)(J,{side:""},{default:(0,l.k6)((()=>[(0,l.bF)(X,{modelValue:h.menu.map.style,"onUpdate:modelValue":t[7]||(t[7]=e=>h.menu.map.style=e),val:e.value,color:"primary"},null,8,["modelValue","val"])])),_:2},1024),(0,l.bF)(J,{side:""},{default:(0,l.k6)((()=>[(0,l.Lk)("img",{src:"/mapstyle/"+e.image,width:"40px"},null,8,n)])),_:2},1024),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])),[[P]]))),128)),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:k.toggleHillshade},{default:(0,l.k6)((()=>[(0,l.bF)(J,{avatar:""},{default:(0,l.k6)((()=>[h.hillshadeVisible?((0,l.uX)(),(0,l.Wv)(I,{key:0,name:"check_box"})):((0,l.uX)(),(0,l.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,null,{default:(0,l.k6)((()=>t[20]||(t[20]=[(0,l.eW)("Hillshade")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:k.toggleBuildings},{default:(0,l.k6)((()=>[(0,l.bF)(J,{avatar:""},{default:(0,l.k6)((()=>[h.buildingsVisible?((0,l.uX)(),(0,l.Wv)(I,{key:0,name:"check_box"})):((0,l.uX)(),(0,l.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,null,{default:(0,l.k6)((()=>t[21]||(t[21]=[(0,l.eW)("Buildings")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:k.togglePitch},{default:(0,l.k6)((()=>[(0,l.bF)(J,{avatar:""},{default:(0,l.k6)((()=>[h.is3D?((0,l.uX)(),(0,l.Wv)(I,{key:0,name:"check_box"})):((0,l.uX)(),(0,l.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,null,{default:(0,l.k6)((()=>t[22]||(t[22]=[(0,l.eW)("3D View")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:k.toggleFloodzones},{default:(0,l.k6)((()=>[(0,l.bF)(J,{avatar:""},{default:(0,l.k6)((()=>[h.flood.visible?((0,l.uX)(),(0,l.Wv)(I,{key:0,name:"check_box"})):((0,l.uX)(),(0,l.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,null,{default:(0,l.k6)((()=>t[23]||(t[23]=[(0,l.eW)("Flood Zones")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[P]])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:h.search.drawer,"onUpdate:modelValue":t[12]||(t[12]=e=>h.search.drawer=e),width:300,elevated:"",side:"left"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{class:"fit"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",c,[t[24]||(t[24]=(0,l.Lk)("div",{class:"q-px-md col-9 self-center q-py-sm text-weight-medium text-h6 text-grey-8"}," Search ",-1)),(0,l.Lk)("div",u,[(0,l.bF)(F,{icon:"close",flat:"",onClick:t[9]||(t[9]=e=>h.search.drawer=!1)})]),(0,l.Lk)("div",_,[(0,l.bF)(z,{dense:"",square:"",label:"Search Center",filled:"",color:"dark",modelValue:h.search.filter,"onUpdate:modelValue":t[10]||(t[10]=e=>h.search.filter=e)},null,8,["modelValue"])]),(0,l.Lk)("div",p,[(0,l.bF)(D,{modelValue:h.search.range,"onUpdate:modelValue":t[11]||(t[11]=e=>h.search.range=e),min:0,max:30,color:"deep-orange","label-always":"",markers:"","left-label-value":h.search.range.min+" km","right-label-value":h.search.range.max+" km"},null,8,["modelValue","left-label-value","right-label-value"])]),h.search.rows.length?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bF)(M,{separator:"",class:"bg-grey-2"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(k.filteredSearch,(e=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{clickable:"",key:e.id},{default:(0,l.k6)((()=>[(0,l.bF)(J,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(I,{color:"secondary",name:"location_on"})])),_:1}),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,{class:"text-weight-medium",lines:"2"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.name),1)])),_:2},1024),(0,l.bF)(q,{caption:"",class:"text-weight-medium text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.type),1)])),_:2},1024),(0,l.bF)(q,{caption:""},{default:(0,l.k6)((()=>[(0,l.eW)("LNG: "+(0,r.v_)(e.lng)+" | LAT: "+(0,r.v_)(e.lat),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[P]]))),128))])),_:1})])):(0,l.Q3)("",!0)])])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:h.menu.sensors.drawer,"onUpdate:modelValue":t[15]||(t[15]=e=>h.menu.sensors.drawer=e),width:300,elevated:"",side:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{class:"fit"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",b,[t[25]||(t[25]=(0,l.Lk)("div",{class:"q-px-md col-9 self-center q-py-sm text-weight-medium text-h6 text-grey-8"}," Sensors ",-1)),(0,l.Lk)("div",g,[(0,l.bF)(F,{icon:"close",flat:"",onClick:t[13]||(t[13]=e=>h.menu.sensors.drawer=!1)})])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(h.menu.sensors.options,((e,a)=>(0,l.bo)(((0,l.uX)(),(0,l.Wv)(C,{key:a,tag:"label",class:(0,r.C4)(["text-weight-medium",h.menu.sensors.selected===e?"bg-grey-4":""])},{default:(0,l.k6)((()=>[(0,l.bF)(J,{side:""},{default:(0,l.k6)((()=>[(0,l.bF)(X,{modelValue:h.menu.sensors.selected,"onUpdate:modelValue":[t[14]||(t[14]=e=>h.menu.sensors.selected=e),t=>k.updateSensor(e)],val:e,color:"primary"},null,8,["modelValue","val","onUpdate:modelValue"])])),_:2},1024),(0,l.bF)(J,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(E,{src:"/parameters/"+e+".png"},null,8,["src"])])),_:2},1024),(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(k.reformatLabel(e)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])),[[P]]))),128))])),_:1})])),_:1},8,["modelValue"])],64)}a(2203),a(95);var h=a(1083),k=a.n(h),v=a(4112),f=a(9862);const x={class:"text-center q-mb-md"};function w(e,t,a,o,i,s){const d=(0,l.g2)("q-item-label"),n=(0,l.g2)("q-item-section"),c=(0,l.g2)("q-item"),u=(0,l.g2)("q-list"),_=(0,l.g2)("q-btn");return(0,l.uX)(),(0,l.CE)("div",null,[a.data.latest_record?((0,l.uX)(),(0,l.Wv)(u,{key:0,separator:""},{default:(0,l.k6)((()=>["all"!==a.sensor&&"soil_moisture"!==a.sensor||!JSON.parse(s.client).soil_moisture?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("soil_moisture")),1)])),_:1}),a.data.latest_record.soil_moisture_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.soil_moisture_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.soil_moisture)+" "+(0,r.v_)(a.data.latest_record.soil_moisture_category?JSON.parse(a.data.latest_record.soil_moisture_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.soil_moisture_category?JSON.parse(a.data.latest_record.soil_moisture_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"soil_temperature"!==a.sensor||!JSON.parse(s.client).soil_temperature?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("soil_temperature")),1)])),_:1}),a.data.latest_record.soil_temperature_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.soil_temperature_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.soil_temperature)+" "+(0,r.v_)(a.data.latest_record.soil_temperature_category?JSON.parse(a.data.latest_record.soil_temperature_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.soil_temperature_category?JSON.parse(a.data.latest_record.soil_temperature_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"soil_electrical_conductivity"!==a.sensor||!JSON.parse(s.client).soil_electrical_conductivity?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:2},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("soil_electrical_conductivity")),1)])),_:1}),a.data.latest_record.soil_electrical_conductivity_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.soil_electrical_conductivity_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.soil_electrical_conductivity)+" "+(0,r.v_)(a.data.latest_record.soil_electrical_conductivity_category?JSON.parse(a.data.latest_record.soil_electrical_conductivity_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.soil_electrical_conductivity_category?JSON.parse(a.data.latest_record.soil_electrical_conductivity_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"air_temperature"!==a.sensor||!JSON.parse(s.client).air_temperature?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:3},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("air_temperature")),1)])),_:1}),a.data.latest_record.air_temperature_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.air_temperature_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.air_temperature)+" "+(0,r.v_)(a.data.latest_record.air_temperature_category?JSON.parse(a.data.latest_record.air_temperature_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.air_temperature_category?JSON.parse(a.data.latest_record.air_temperature_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"air_humidity"!==a.sensor||!JSON.parse(s.client).air_humidity?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:4},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("air_humidity")),1)])),_:1}),a.data.latest_record.air_humidity_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.air_humidity_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.air_humidity)+" "+(0,r.v_)(a.data.latest_record.air_humidity_category?JSON.parse(a.data.latest_record.air_humidity_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.air_humidity_category?JSON.parse(a.data.latest_record.air_humidity_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"air_pressure"!==a.sensor||!JSON.parse(s.client).air_pressure?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:5},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("air_pressure")),1)])),_:1}),a.data.latest_record.air_pressure_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.air_pressure_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.air_pressure)+" "+(0,r.v_)(a.data.latest_record.air_pressure_category?JSON.parse(a.data.latest_record.air_pressure_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.air_pressure_category?JSON.parse(a.data.latest_record.air_pressure_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"rain_gauge"!==a.sensor||!JSON.parse(s.client).rain_gauge?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:6},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("rain_gauge")),1)])),_:1}),a.data.latest_record.rain_gauge_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.rain_gauge_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.rain_gauge)+" "+(0,r.v_)(a.data.latest_record.rain_gauge_category?JSON.parse(a.data.latest_record.rain_gauge_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.rain_gauge_category?JSON.parse(a.data.latest_record.rain_gauge_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"wind_speed"!==a.sensor||!JSON.parse(s.client).wind_speed?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:7},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("wind_speed")),1)])),_:1}),a.data.latest_record.wind_speed_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.wind_speed_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.wind_speed)+" "+(0,r.v_)(a.data.latest_record.wind_speed_category?JSON.parse(a.data.latest_record.wind_speed_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.wind_speed_category?JSON.parse(a.data.latest_record.wind_speed_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"hurricane_severity_index"!==a.sensor||!JSON.parse(s.client).hurricane_severity_index?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:8},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("hurricane_severity_index")),1)])),_:1}),a.data.latest_record.hurricane_severity_index_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.hurricane_severity_index_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.hurricane_severity_index)+" "+(0,r.v_)(a.data.latest_record.hurricane_severity_index_category?JSON.parse(a.data.latest_record.hurricane_severity_index_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.hurricane_severity_index_category?JSON.parse(a.data.latest_record.hurricane_severity_index_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"evapotranspiration_rate"!==a.sensor||!JSON.parse(s.client).evapotranspiration_rate?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:9},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("evapotranspiration_rate")),1)])),_:1}),a.data.latest_record.evapotranspiration_rate_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.evapotranspiration_rate_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.evapotranspiration_rate)+" "+(0,r.v_)(a.data.latest_record.evapotranspiration_rate_category?JSON.parse(a.data.latest_record.evapotranspiration_rate_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.evapotranspiration_rate_category?JSON.parse(a.data.latest_record.evapotranspiration_rate_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"heat_index"!==a.sensor||!JSON.parse(s.client).heat_index?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:10},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("heat_index")),1)])),_:1}),a.data.latest_record.heat_index_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.heat_index_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.heat_index)+" "+(0,r.v_)(a.data.latest_record.heat_index_category?JSON.parse(a.data.latest_record.heat_index_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.heat_index_category?JSON.parse(a.data.latest_record.heat_index_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"visibility"!==a.sensor||!JSON.parse(s.client).visibility?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:11},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("visibility")),1)])),_:1}),a.data.latest_record.visibility_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.visibility_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.visibility)+" "+(0,r.v_)(a.data.latest_record.visibility_category?JSON.parse(a.data.latest_record.visibility_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.visibility_category?JSON.parse(a.data.latest_record.visibility_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"storm_surge"!==a.sensor||!JSON.parse(s.client).storm_surge?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:12},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("storm_surge")),1)])),_:1}),a.data.latest_record.storm_surge_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.storm_surge_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.storm_surge)+" "+(0,r.v_)(a.data.latest_record.storm_surge_category?JSON.parse(a.data.latest_record.storm_surge_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.storm_surge_category?JSON.parse(a.data.latest_record.storm_surge_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"water_level"!==a.sensor||!JSON.parse(s.client).water_level?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:13},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("water_level")),1)])),_:1}),a.data.latest_record.water_level_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.water_level_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.water_level)+" "+(0,r.v_)(a.data.latest_record.water_level_category?JSON.parse(a.data.latest_record.water_level_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.water_level_category?JSON.parse(a.data.latest_record.water_level_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"water_flow"!==a.sensor||!JSON.parse(s.client).water_flow?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:14},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("water_flow")),1)])),_:1}),a.data.latest_record.water_flow_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.water_flow_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.water_flow)+" "+(0,r.v_)(a.data.latest_record.water_flow_category?JSON.parse(a.data.latest_record.water_flow_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.water_flow_category?JSON.parse(a.data.latest_record.water_flow_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"battery"!==a.sensor||!JSON.parse(s.client).battery?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(c,{key:15},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(s.reformatLabel("battery")),1)])),_:1}),a.data.latest_record.battery_category?((0,l.uX)(),(0,l.Wv)(d,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(JSON.parse(a.data.latest_record.battery_category).description),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),a.data.latest_record?((0,l.uX)(),(0,l.Wv)(n,{key:0,side:""},{default:(0,l.k6)((()=>[(0,l.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.battery)+" "+(0,r.v_)(a.data.latest_record.battery_category?JSON.parse(a.data.latest_record.battery_category).unit:null),1)])),_:1}),(0,l.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(a.data.latest_record.battery_category?JSON.parse(a.data.latest_record.battery_category).name:null),1)])),_:1})])),_:1})):(0,l.Q3)("",!0)])),_:1}))])),_:1})):(0,l.Q3)("",!0),(0,l.Lk)("div",x,[(0,l.bF)(_,{label:"Dashboard",color:"dark",class:"q-mt-sm",href:"/devices/"+a.uuid+"/sensors"},null,8,["href"])])])}const W={name:"MarkerPopUp",props:["name","uuid","sensor","data"],methods:{reformatLabel(e){return e.replaceAll("_"," ").toUpperCase()}},computed:{client(){return localStorage.getItem("client")}}};var F=a(2807),S=a(3999),L=a(124),N=a(5173),Q=a(3796),O=a(6384),X=a(8582),J=a.n(X);const q=(0,F.A)(W,[["render",w],["__scopeId","data-v-2591646c"]]),C=q;J()(W,"components",{QList:S.A,QItem:L.A,QItemSection:N.A,QItemLabel:Q.A,QBtn:O.A});const I={name:"MapboxTerrainHillshade",components:{MapPopup:C},data(){return{mapbox:null,currentLocation:[],hillshadeVisible:!0,is3D:!1,buildingsVisible:!1,markers:[],rows:[],dialog:{open:!1,payload:null},flood:{visible:!0,url:"https://api.wehlo.rwebcloud.app/flood-geojson",sourceId:"floodzones-source",fillLayerId:"floodzones-fill",lineLayerId:"floodzones-outline",fillColor:"#1e88e5",fillOpacity:.35,lineColor:"#0d47a1",lineWidth:1},menu:{show:!1,map:{style:"mapbox://styles/mapbox/streets-v12",drawer:!1,options:[{label:"Streets",image:"streets.png",value:"mapbox://styles/mapbox/streets-v12",color:"primary"},{label:"Outdoors",image:"outdoors.png",value:"mapbox://styles/mapbox/outdoors-v12",color:"primary"},{label:"Light",image:"light.png",value:"mapbox://styles/mapbox/light-v11",color:"primary"},{label:"Dark",image:"dark.png",value:"mapbox://styles/mapbox/dark-v11",color:"primary"},{label:"Satellite",image:"satellite.png",value:"mapbox://styles/mapbox/satellite-v9",color:"primary"},{label:"Satellite Streets",image:"satellite-streets.png",value:"mapbox://styles/mapbox/satellite-streets-v12",color:"primary"},{label:"Navigation Day",image:"navigation-day.png",value:"mapbox://styles/mapbox/navigation-day-v1",color:"primary"},{label:"Navigation Night",image:"navigation-night.png",value:"mapbox://styles/mapbox/navigation-night-v1",color:"primary"}]},sensors:{selected:"all",drawer:!1,options:["all"]}},search:{dialog:!1,rows:[],filter:"",range:{min:0,max:50}}}},mounted(){this.getSearchResults();const e=JSON.parse(this.client||"{}"),t=["soil_moisture","soil_temperature","soil_electrical_conductivity","air_temperature","air_humidity","air_pressure","rain_gauge","wind_speed","hurricane_severity_index","evapotranspiration_rate","heat_index","visibility","storm_surge","water_level","water_flow","battery"];t.forEach((t=>{e[t]&&this.menu.sensors.options.push(t)})),this.index(),(0,l.wB)((()=>this.dialog.open),(e=>{if(!this.mapbox)return;const t=()=>{this.mapbox.scrollZoom.enable(),this.mapbox.boxZoom.enable(),this.mapbox.dragRotate.enable(),this.mapbox.keyboard.enable(),this.mapbox.doubleClickZoom.enable(),this.mapbox.touchZoomRotate.enable(),this.mapbox.dragPan.enable()},a=()=>{this.mapbox.scrollZoom.disable(),this.mapbox.boxZoom.disable(),this.mapbox.dragRotate.disable(),this.mapbox.keyboard.disable(),this.mapbox.doubleClickZoom.disable(),this.mapbox.touchZoomRotate.disable(),this.mapbox.dragPan.disable()};e?a():t()}))},methods:{addFloodzones(){this.mapbox&&!this.mapbox.getSource(this.flood.sourceId)&&(this.mapbox.addSource(this.flood.sourceId,{type:"geojson",data:this.flood.url}),this.mapbox.addLayer({id:this.flood.fillLayerId,type:"fill",source:this.flood.sourceId,layout:{visibility:this.flood.visible?"visible":"none"},paint:{"fill-color":this.flood.fillColor,"fill-opacity":this.flood.fillOpacity}}),this.mapbox.addLayer({id:this.flood.lineLayerId,type:"line",source:this.flood.sourceId,layout:{visibility:this.flood.visible?"visible":"none"},paint:{"line-color":this.flood.lineColor,"line-width":this.flood.lineWidth}}),this.mapbox.on("click",this.flood.fillLayerId,(e=>{const t=e.features?.[0];if(!t)return;const a=t.properties||{},l=Object.entries(a).map((([e,t])=>`<tr><td style="padding:4px 8px">${e}</td><td style="padding:4px 8px"><b>${t}</b></td></tr>`)).join("");(new(k().Popup)).setLngLat(e.lngLat).setHTML(`<div style="min-width:220px"><div class="text-subtitle2 q-mb-xs">Flood Zone</div><table>${l}</table></div>`).addTo(this.mapbox)})),this.mapbox.on("mouseenter",this.flood.fillLayerId,(()=>{this.mapbox.getCanvas().style.cursor="pointer"})),this.mapbox.on("mouseleave",this.flood.fillLayerId,(()=>{this.mapbox.getCanvas().style.cursor=""})))},removeFloodzones(){if(!this.mapbox)return;const{fillLayerId:e,lineLayerId:t,sourceId:a}=this.flood;this.mapbox.getLayer(e)&&this.mapbox.removeLayer(e),this.mapbox.getLayer(t)&&this.mapbox.removeLayer(t),this.mapbox.getSource(a)&&this.mapbox.removeSource(a)},toggleFloodzones(){this.mapbox&&(this.flood.visible=!this.flood.visible,[this.flood.fillLayerId,this.flood.lineLayerId].forEach((e=>{this.mapbox.getLayer(e)&&this.mapbox.setLayoutProperty(e,"visibility",this.flood.visible?"visible":"none")})))},openDialog(e){this.dialog.payload=e,this.dialog.open=!0},attachMarkerHandlers(e,t){e.style.cursor="pointer",e.addEventListener("click",(()=>this.openDialog(t))),e.tabIndex=0,e.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||this.openDialog(t)}))},updateSensor(){document.querySelectorAll(".marker").forEach((e=>e.remove())),this.rows.forEach((e=>{let t="x";const a=e.latest_record||{},l=this.menu.sensors.selected,r=e=>a[e]?JSON.parse(a[e]).img:"url(/icons/favicon-128x128.png)";"soil_moisture"===l&&(t=r("soil_moisture_category")),"soil_temperature"===l&&(t=r("soil_temperature_category")),"soil_electrical_conductivity"===l&&(t=r("soil_electrical_conductivity_category")),"air_temperature"===l&&(t=r("air_temperature_category")),"air_humidity"===l&&(t=r("air_humidity_category")),"air_pressure"===l&&(t=r("air_pressure_category")),"rain_gauge"===l&&(t=r("rain_gauge_category")),"wind_speed"===l&&(t=r("wind_speed_category")),"hurricane_severity_index"===l&&(t=r("hurricane_severity_index_category")),"evapotranspiration_rate"===l&&(t=r("evapotranspiration_rate_category")),"heat_index"===l&&(t=r("heat_index_category")),"visibility"===l&&(t=r("visibility_category")),"storm_surge"===l&&(t=r("storm_surge_category")),"water_level"===l&&(t=r("water_level_category")),"water_flow"===l&&(t=r("water_flow_category")),"battery"===l&&(t=r("battery_category")),console.log(t);const o=document.createElement("div");o.className="marker",o.style.backgroundImage="x"===t||null==t?"url(/icons/favicon-128x128.png)":`url(/category/${t})`,o.style.width="x"===t?"100px":"75px",o.style.height="x"===t?"100px":"75px",o.style.backgroundSize="cover",new(k().Marker)(o).setLngLat([e.lng,e.lat]).addTo(this.mapbox),this.attachMarkerHandlers(o,e)}))},async index(){this.$api.get("app/dashboard",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((async e=>{this.rows=e.data.devices||[],this.markers=[],this.rows.forEach((e=>{this.$echo.channel("device-"+e.uuid).listen("LatestSensorData",(t=>{const a=this.rows.find((t=>t.uuid===e.uuid));a&&(a.latest_record=t.message)}))})),k().accessToken="pk.eyJ1IjoicndlYnNvbHV0aW9ucyIsImEiOiJjbTl3YTBzdncwdDN4MmtvcGM4NDN5eWY0In0.xFLIS1BaTt8wHu8y0_SeYg";const t=await v.L.getCurrentPosition();this.currentLocation=[t.coords.longitude,t.coords.latitude],this.mapbox=new(k().Map)({container:this.$refs.mapContainer,style:this.menu.map.style,center:[t.coords.longitude,t.coords.latitude],zoom:10,pitch:0,bearing:0,antialias:!0}),this.mapbox.on("load",(()=>{this.rows.forEach((e=>{const t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(/icons/favicon-128x128.png)",t.style.width="100px",t.style.height="100px",t.style.backgroundSize="cover",new(k().Marker)(t).setLngLat([e.lng,e.lat]).addTo(this.mapbox),this.attachMarkerHandlers(t,e)})),this.mapbox.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14}),this.mapbox.addLayer({id:"hillshade-layer",type:"hillshade",source:"mapbox-dem",layout:{visibility:"visible"},paint:{"hillshade-exaggeration":.5}}),this.mapbox.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.mapbox.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}}),this.mapbox.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,layout:{visibility:"none"},paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","min_height"],"fill-extrusion-opacity":.6}}),this.addFloodzones()}))}))},dateReformat(e){return f.Ay.formatDate(e,"MMM DD, YYYY - h:mm a")},reformatLabel(e){return e.replaceAll("_"," ").toUpperCase()},changeStyle(){this.mapbox&&(this.mapbox.setStyle(this.menu.map.style),this.mapbox.once("styledata",(()=>{this.mapbox.once("idle",(()=>{this.mapbox.getSource("mapbox-dem")||(this.mapbox.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14}),this.mapbox.addLayer({id:"hillshade-layer",type:"hillshade",source:"mapbox-dem",layout:{visibility:this.hillshadeVisible?"visible":"none"},paint:{"hillshade-exaggeration":.5}}),this.mapbox.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.mapbox.getLayer("sky")||this.mapbox.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})),this.mapbox.getLayer("3d-buildings")||this.mapbox.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,layout:{visibility:this.buildingsVisible?"visible":"none"},paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","min_height"],"fill-extrusion-opacity":.6}}),this.flood.visible&&!this.mapbox.getSource(this.flood.sourceId)&&this.addFloodzones(),this.updateSensor()}))})))},togglePitch(){this.mapbox&&(this.is3D=!this.is3D,this.mapbox.easeTo({pitch:this.is3D?60:0,duration:1e3}))},toggleBuildings(){this.mapbox.getLayer("3d-buildings")&&(this.buildingsVisible=!this.buildingsVisible,this.mapbox.setLayoutProperty("3d-buildings","visibility",this.buildingsVisible?"visible":"none"))},toggleHillshade(){if(!this.mapbox.getLayer("hillshade-layer"))return;const e=this.mapbox.getLayoutProperty("hillshade-layer","visibility"),t="visible"===e?"none":"visible";this.mapbox.setLayoutProperty("hillshade-layer","visibility",t),this.hillshadeVisible="visible"===t},getSearchResults(){this.$api.get("/cms/centers",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.search.rows=e.data}))}},computed:{client(){return localStorage.getItem("client")},filteredSearch(){return this.search.filter?this.search.rows.filter((e=>e.name.toLowerCase().includes(this.search.filter.toLowerCase()))):this.search.rows}}};var V=a(7716),A=a(3718),z=a(4782),D=a(284),M=a(2156),E=a(3316),P=a(4189),T=a(3676),U=a(386),B=a(6056),H=a(8958),R=a(7878),Z=a(492),Y=a(9270),$=a(137),j=a(2665),K=a(9626);const G=(0,F.A)(I,[["render",y],["__scopeId","data-v-2f8cbb6e"]]),ee=G;J()(I,"components",{QPage:V.A,QPageSticky:A.A,QFab:z.A,QFabAction:D.A,QDialog:M.A,QCard:E.A,QCardSection:P.A,QSpace:T.A,QBtn:O.A,QSeparator:U.A,QDrawer:B.A,QScrollArea:H.A,QItem:L.A,QItemSection:N.A,QRadio:R.A,QItemLabel:Q.A,QIcon:Z.A,QInput:Y.A,QRange:$.A,QList:S.A,QImg:j.A}),J()(I,"directives",{Ripple:K.A})}}]);