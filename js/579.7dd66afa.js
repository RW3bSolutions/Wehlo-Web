"use strict";(globalThis["webpackChunkwehlo_app"]=globalThis["webpackChunkwehlo_app"]||[]).push([[579],{3579:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});a(310),a(5962),a(6724);var r=a(1758),l=a(8790);const i={id:"map",ref:"mapContainer",style:{height:"calc(100vh - 89px)",width:"100%"}},o={class:"text-h6"},s={class:"row"},d={class:"col-3 self-center q-pa-sm text-right"},n=["src"],c={class:"row"},_={class:"col-3 self-center q-pa-sm text-right"},u={class:"col-12 q-mb-sm q-pa-md"},p={class:"col-12 q-px-md q-pt-md"},m={key:0,class:"col-12 q-px-sm q-pb-sm"},g={class:"row"},y={class:"col-3 self-center q-pa-sm text-right"};function b(e,t,a,b,h,v){const k=(0,r.g2)("q-fab-action"),f=(0,r.g2)("q-fab"),x=(0,r.g2)("q-page-sticky"),w=(0,r.g2)("q-page"),W=(0,r.g2)("q-space"),F=(0,r.g2)("q-btn"),S=(0,r.g2)("q-card-section"),N=(0,r.g2)("q-separator"),L=(0,r.g2)("MapPopup"),O=(0,r.g2)("q-card"),J=(0,r.g2)("q-dialog"),Q=(0,r.g2)("q-radio"),X=(0,r.g2)("q-item-section"),q=(0,r.g2)("q-item-label"),C=(0,r.g2)("q-item"),I=(0,r.g2)("q-icon"),V=(0,r.g2)("q-scroll-area"),A=(0,r.g2)("q-drawer"),z=(0,r.g2)("q-input"),D=(0,r.g2)("q-range"),E=(0,r.g2)("q-list"),M=(0,r.g2)("q-img"),T=(0,r.gN)("ripple");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(w,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",i,[h.menu.map.drawer||h.search.drawer||h.menu.sensors.drawer?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(x,{key:0,position:"bottom-left",offset:[18,18],style:{"z-index":"9999999999"}},{default:(0,r.k6)((()=>[(0,r.bF)(f,{modelValue:h.menu.show,"onUpdate:modelValue":t[3]||(t[3]=e=>h.menu.show=e),label:"Menu","vertical-actions-align":"left",color:"secondary",icon:"menu","text-color":"white",padding:"sm",direction:"up"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{padding:"5px","external-label":"",color:"white",label:"Map",onClick:t[0]||(t[0]=e=>(h.clickCount+=1,v.open("map")))},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.Lk)("img",{src:"/map-icon.png",width:"35px"},null,-1)]))),_:1}),(0,r.bF)(k,{padding:"5px","external-label":"",color:"white",label:"Search",onClick:t[1]||(t[1]=e=>(h.clickCount+=1,v.open("search")))},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.Lk)("img",{src:"/search-icon.png",width:"35px"},null,-1)]))),_:1}),(0,r.bF)(k,{padding:"5px","external-label":"",color:"white",label:"Sensors",onClick:t[2]||(t[2]=e=>(h.clickCount+=1,v.open("sensors")))},{default:(0,r.k6)((()=>t[18]||(t[18]=[(0,r.Lk)("img",{src:"/sensors-icon.png",width:"35px"},null,-1)]))),_:1})])),_:1},8,["modelValue"])])),_:1}))],512)])),_:1}),(0,r.bF)(J,{modelValue:h.dialog.open,"onUpdate:modelValue":t[5]||(t[5]=e=>h.dialog.open=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.k6)((()=>[(0,r.bF)(O,{style:{width:"420px","max-width":"95vw"}},{default:(0,r.k6)((()=>[(0,r.bF)(S,{class:"row items-center"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",o,(0,l.v_)(h.dialog.payload?.name||"Station"),1),(0,r.bF)(W),(0,r.bF)(F,{icon:"close",flat:"",round:"",dense:"",onClick:t[4]||(t[4]=e=>h.dialog.open=!1)})])),_:1}),(0,r.bF)(N),(0,r.bF)(S,{style:{padding:"0"}},{default:(0,r.k6)((()=>[h.dialog.payload?((0,r.uX)(),(0,r.Wv)(L,{key:0,name:h.dialog.payload.name,uuid:h.dialog.payload.uuid,sensor:h.menu.sensors.selected,data:h.dialog.payload},null,8,["name","uuid","sensor","data"])):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(A,{persistent:"",modelValue:h.menu.map.drawer,"onUpdate:modelValue":t[8]||(t[8]=e=>h.menu.map.drawer=e),width:300,elevated:"",side:"left"},{default:(0,r.k6)((()=>[(0,r.bF)(V,{class:"fit"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",s,[t[19]||(t[19]=(0,r.Lk)("div",{class:"q-px-md col-9 self-center q-py-sm text-weight-medium text-h6 text-grey-8"}," Map ",-1)),(0,r.Lk)("div",d,[(0,r.bF)(F,{icon:"close",flat:"",onClick:t[6]||(t[6]=e=>h.menu.map.drawer=!1)})])]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(h.menu.map.options,(e=>(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{key:e.label,tag:"label",dense:"",class:(0,l.C4)(["q-py-sm text-weight-medium",h.menu.map.style===e.value?"bg-grey-4":""]),onClick:t=>{h.menu.map.style=e.value,v.changeStyle()}},{default:(0,r.k6)((()=>[(0,r.bF)(X,{side:""},{default:(0,r.k6)((()=>[(0,r.bF)(Q,{modelValue:h.menu.map.style,"onUpdate:modelValue":t[7]||(t[7]=e=>h.menu.map.style=e),val:e.value,color:"primary"},null,8,["modelValue","val"])])),_:2},1024),(0,r.bF)(X,{side:""},{default:(0,r.k6)((()=>[(0,r.Lk)("img",{src:"/mapstyle/"+e.image,width:"40px"},null,8,n)])),_:2},1024),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])),[[T]]))),128)),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:v.toggleHillshade},{default:(0,r.k6)((()=>[(0,r.bF)(X,{avatar:""},{default:(0,r.k6)((()=>[h.hillshadeVisible?((0,r.uX)(),(0,r.Wv)(I,{key:0,name:"check_box"})):((0,r.uX)(),(0,r.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,null,{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.eW)("Hillshade")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[T]]),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:v.toggleBuildings},{default:(0,r.k6)((()=>[(0,r.bF)(X,{avatar:""},{default:(0,r.k6)((()=>[h.buildingsVisible?((0,r.uX)(),(0,r.Wv)(I,{key:0,name:"check_box"})):((0,r.uX)(),(0,r.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,null,{default:(0,r.k6)((()=>t[21]||(t[21]=[(0,r.eW)("Buildings")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[T]]),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:v.togglePitch},{default:(0,r.k6)((()=>[(0,r.bF)(X,{avatar:""},{default:(0,r.k6)((()=>[h.is3D?((0,r.uX)(),(0,r.Wv)(I,{key:0,name:"check_box"})):((0,r.uX)(),(0,r.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,null,{default:(0,r.k6)((()=>t[22]||(t[22]=[(0,r.eW)("3D View")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[T]]),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{tag:"label",class:"q-py-sm text-weight-medium",onClick:v.toggleFloodzones},{default:(0,r.k6)((()=>[(0,r.bF)(X,{avatar:""},{default:(0,r.k6)((()=>[h.flood.visible?((0,r.uX)(),(0,r.Wv)(I,{key:0,name:"check_box"})):((0,r.uX)(),(0,r.Wv)(I,{key:1,name:"check_box_outline_blank"}))])),_:1}),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,null,{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Flood Zones")]))),_:1})])),_:1})])),_:1},8,["onClick"])),[[T]])])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(A,{persistent:"",modelValue:h.search.drawer,"onUpdate:modelValue":t[12]||(t[12]=e=>h.search.drawer=e),width:300,elevated:"",side:"left"},{default:(0,r.k6)((()=>[(0,r.bF)(V,{class:"fit"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",c,[t[24]||(t[24]=(0,r.Lk)("div",{class:"q-px-md col-9 self-center q-py-sm text-weight-medium text-h6 text-grey-8"}," Search ",-1)),(0,r.Lk)("div",_,[(0,r.bF)(F,{icon:"close",flat:"",onClick:t[9]||(t[9]=e=>h.search.drawer=!1)})]),(0,r.Lk)("div",u,[(0,r.bF)(z,{dense:"",square:"",label:"Search Center",filled:"",color:"dark",modelValue:h.search.filter,"onUpdate:modelValue":t[10]||(t[10]=e=>h.search.filter=e)},null,8,["modelValue"])]),(0,r.Lk)("div",p,[(0,r.bF)(D,{modelValue:h.search.range,"onUpdate:modelValue":t[11]||(t[11]=e=>h.search.range=e),min:0,max:30,color:"deep-orange","label-always":"",markers:"","left-label-value":h.search.range.min+" km","right-label-value":h.search.range.max+" km"},null,8,["modelValue","left-label-value","right-label-value"])]),h.search.rows.length?((0,r.uX)(),(0,r.CE)("div",m,[(0,r.bF)(E,{separator:"",class:"bg-grey-2"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(v.filteredSearch,(e=>(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{clickable:"",key:e.id},{default:(0,r.k6)((()=>[(0,r.bF)(X,{avatar:""},{default:(0,r.k6)((()=>[(0,r.bF)(I,{color:"secondary",name:"location_on"})])),_:1}),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,{class:"text-weight-medium",lines:"2"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(e.name),1)])),_:2},1024),(0,r.bF)(q,{caption:"",class:"text-weight-medium text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(e.type),1)])),_:2},1024),(0,r.bF)(q,{caption:""},{default:(0,r.k6)((()=>[(0,r.eW)("LNG: "+(0,l.v_)(e.lng)+" | LAT: "+(0,l.v_)(e.lat),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[T]]))),128))])),_:1})])):(0,r.Q3)("",!0)])])),_:1})])),_:1},8,["modelValue"]),(0,r.bF)(A,{persistent:"",modelValue:h.menu.sensors.drawer,"onUpdate:modelValue":t[15]||(t[15]=e=>h.menu.sensors.drawer=e),width:300,elevated:"",side:"left"},{default:(0,r.k6)((()=>[(0,r.bF)(V,{class:"fit"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",g,[t[25]||(t[25]=(0,r.Lk)("div",{class:"q-px-md col-9 self-center q-py-sm text-weight-medium text-h6 text-grey-8"}," Sensors ",-1)),(0,r.Lk)("div",y,[(0,r.bF)(F,{icon:"close",flat:"",onClick:t[13]||(t[13]=e=>h.menu.sensors.drawer=!1)})])]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(h.menu.sensors.options,((e,a)=>(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{key:a,tag:"label",class:(0,l.C4)(["text-weight-medium",h.menu.sensors.selected===e?"bg-grey-4":""])},{default:(0,r.k6)((()=>[(0,r.bF)(X,{side:""},{default:(0,r.k6)((()=>[(0,r.bF)(Q,{modelValue:h.menu.sensors.selected,"onUpdate:modelValue":[t[14]||(t[14]=e=>h.menu.sensors.selected=e),t=>v.updateSensor(e)],val:e,color:"primary"},null,8,["modelValue","val","onUpdate:modelValue"])])),_:2},1024),(0,r.bF)(X,{avatar:""},{default:(0,r.k6)((()=>[(0,r.bF)(M,{src:"/parameters/"+e+".png"},null,8,["src"])])),_:2},1024),(0,r.bF)(X,null,{default:(0,r.k6)((()=>[(0,r.bF)(q,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(v.reformatLabel(e)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])),[[T]]))),128))])),_:1})])),_:1},8,["modelValue"])],64)}a(2203),a(95);var h=a(1083),v=a.n(h),k=a(4112),f=a(6246);const x={class:"text-center q-mb-md"};function w(e,t,a,i,o,s){const d=(0,r.g2)("q-item-label"),n=(0,r.g2)("q-item-section"),c=(0,r.g2)("q-item"),_=(0,r.g2)("q-list"),u=(0,r.g2)("q-btn");return(0,r.uX)(),(0,r.CE)("div",null,[a.data.latest_record?((0,r.uX)(),(0,r.Wv)(_,{key:0,separator:""},{default:(0,r.k6)((()=>["all"!==a.sensor&&"soil_moisture"!==a.sensor||!JSON.parse(s.client).soil_moisture?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:0},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("soil_moisture")),1)])),_:1}),a.data.latest_record.soil_moisture_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.soil_moisture_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.soil_moisture)+" "+(0,l.v_)(a.data.latest_record.soil_moisture_category?JSON.parse(a.data.latest_record.soil_moisture_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.soil_moisture_category?JSON.parse(a.data.latest_record.soil_moisture_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"soil_temperature"!==a.sensor||!JSON.parse(s.client).soil_temperature?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:1},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("soil_temperature")),1)])),_:1}),a.data.latest_record.soil_temperature_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.soil_temperature_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.soil_temperature)+" "+(0,l.v_)(a.data.latest_record.soil_temperature_category?JSON.parse(a.data.latest_record.soil_temperature_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.soil_temperature_category?JSON.parse(a.data.latest_record.soil_temperature_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"soil_electrical_conductivity"!==a.sensor||!JSON.parse(s.client).soil_electrical_conductivity?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:2},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("soil_electrical_conductivity")),1)])),_:1}),a.data.latest_record.soil_electrical_conductivity_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.soil_electrical_conductivity_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.soil_electrical_conductivity)+" "+(0,l.v_)(a.data.latest_record.soil_electrical_conductivity_category?JSON.parse(a.data.latest_record.soil_electrical_conductivity_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.soil_electrical_conductivity_category?JSON.parse(a.data.latest_record.soil_electrical_conductivity_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"air_temperature"!==a.sensor||!JSON.parse(s.client).air_temperature?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:3},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("air_temperature")),1)])),_:1}),a.data.latest_record.air_temperature_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.air_temperature_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.air_temperature)+" "+(0,l.v_)(a.data.latest_record.air_temperature_category?JSON.parse(a.data.latest_record.air_temperature_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.air_temperature_category?JSON.parse(a.data.latest_record.air_temperature_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"air_humidity"!==a.sensor||!JSON.parse(s.client).air_humidity?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:4},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("air_humidity")),1)])),_:1}),a.data.latest_record.air_humidity_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.air_humidity_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.air_humidity)+" "+(0,l.v_)(a.data.latest_record.air_humidity_category?JSON.parse(a.data.latest_record.air_humidity_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.air_humidity_category?JSON.parse(a.data.latest_record.air_humidity_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"air_pressure"!==a.sensor||!JSON.parse(s.client).air_pressure?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:5},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("air_pressure")),1)])),_:1}),a.data.latest_record.air_pressure_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.air_pressure_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.air_pressure)+" "+(0,l.v_)(a.data.latest_record.air_pressure_category?JSON.parse(a.data.latest_record.air_pressure_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.air_pressure_category?JSON.parse(a.data.latest_record.air_pressure_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"rain_gauge"!==a.sensor||!JSON.parse(s.client).rain_gauge?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:6},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("rain_gauge")),1)])),_:1}),a.data.latest_record.rain_gauge_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.rain_gauge_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.rain_gauge)+" "+(0,l.v_)(a.data.latest_record.rain_gauge_category?JSON.parse(a.data.latest_record.rain_gauge_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.rain_gauge_category?JSON.parse(a.data.latest_record.rain_gauge_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"wind_speed"!==a.sensor||!JSON.parse(s.client).wind_speed?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:7},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("wind_speed")),1)])),_:1}),a.data.latest_record.wind_speed_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.wind_speed_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.wind_speed)+" "+(0,l.v_)(a.data.latest_record.wind_speed_category?JSON.parse(a.data.latest_record.wind_speed_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.wind_speed_category?JSON.parse(a.data.latest_record.wind_speed_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"hurricane_severity_index"!==a.sensor||!JSON.parse(s.client).hurricane_severity_index?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:8},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("hurricane_severity_index")),1)])),_:1}),a.data.latest_record.hurricane_severity_index_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.hurricane_severity_index_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.hurricane_severity_index)+" "+(0,l.v_)(a.data.latest_record.hurricane_severity_index_category?JSON.parse(a.data.latest_record.hurricane_severity_index_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.hurricane_severity_index_category?JSON.parse(a.data.latest_record.hurricane_severity_index_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"evapotranspiration_rate"!==a.sensor||!JSON.parse(s.client).evapotranspiration_rate?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:9},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("evapotranspiration_rate")),1)])),_:1}),a.data.latest_record.evapotranspiration_rate_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.evapotranspiration_rate_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.evapotranspiration_rate)+" "+(0,l.v_)(a.data.latest_record.evapotranspiration_rate_category?JSON.parse(a.data.latest_record.evapotranspiration_rate_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.evapotranspiration_rate_category?JSON.parse(a.data.latest_record.evapotranspiration_rate_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"heat_index"!==a.sensor||!JSON.parse(s.client).heat_index?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:10},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("heat_index")),1)])),_:1}),a.data.latest_record.heat_index_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.heat_index_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.heat_index)+" "+(0,l.v_)(a.data.latest_record.heat_index_category?JSON.parse(a.data.latest_record.heat_index_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.heat_index_category?JSON.parse(a.data.latest_record.heat_index_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"visibility"!==a.sensor||!JSON.parse(s.client).visibility?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:11},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("visibility")),1)])),_:1}),a.data.latest_record.visibility_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.visibility_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.visibility)+" "+(0,l.v_)(a.data.latest_record.visibility_category?JSON.parse(a.data.latest_record.visibility_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.visibility_category?JSON.parse(a.data.latest_record.visibility_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"storm_surge"!==a.sensor||!JSON.parse(s.client).storm_surge?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:12},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("storm_surge")),1)])),_:1}),a.data.latest_record.storm_surge_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.storm_surge_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.storm_surge)+" "+(0,l.v_)(a.data.latest_record.storm_surge_category?JSON.parse(a.data.latest_record.storm_surge_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.storm_surge_category?JSON.parse(a.data.latest_record.storm_surge_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"water_level"!==a.sensor||!JSON.parse(s.client).water_level?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:13},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("water_level")),1)])),_:1}),a.data.latest_record.water_level_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.water_level_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.water_level)+" "+(0,l.v_)(a.data.latest_record.water_level_category?JSON.parse(a.data.latest_record.water_level_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.water_level_category?JSON.parse(a.data.latest_record.water_level_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"water_flow"!==a.sensor||!JSON.parse(s.client).water_flow?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:14},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("water_flow")),1)])),_:1}),a.data.latest_record.water_flow_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.water_flow_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.water_flow)+" "+(0,l.v_)(a.data.latest_record.water_flow_category?JSON.parse(a.data.latest_record.water_flow_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.water_flow_category?JSON.parse(a.data.latest_record.water_flow_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1})),"all"!==a.sensor&&"battery"!==a.sensor||!JSON.parse(s.client).battery?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(c,{key:15},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(s.reformatLabel("battery")),1)])),_:1}),a.data.latest_record.battery_category?((0,r.uX)(),(0,r.Wv)(d,{key:0,caption:""},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(JSON.parse(a.data.latest_record.battery_category).description),1)])),_:1})):(0,r.Q3)("",!0)])),_:1}),a.data.latest_record?((0,r.uX)(),(0,r.Wv)(n,{key:0,side:""},{default:(0,r.k6)((()=>[(0,r.bF)(d,{caption:"",class:"text-weight-bold text-dark"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.battery)+" "+(0,l.v_)(a.data.latest_record.battery_category?JSON.parse(a.data.latest_record.battery_category).unit:null),1)])),_:1}),(0,r.bF)(d,{caption:"",class:"text-weight-medium"},{default:(0,r.k6)((()=>[(0,r.eW)((0,l.v_)(a.data.latest_record.battery_category?JSON.parse(a.data.latest_record.battery_category).name:null),1)])),_:1})])),_:1})):(0,r.Q3)("",!0)])),_:1}))])),_:1})):(0,r.Q3)("",!0),(0,r.Lk)("div",x,[(0,r.bF)(u,{label:"Dashboard",color:"dark",class:"q-mt-sm",href:"/devices/"+a.uuid+"/sensors"},null,8,["href"])])])}const W={name:"MarkerPopUp",props:["name","uuid","sensor","data"],methods:{reformatLabel(e){return e.replaceAll("_"," ").toUpperCase()}},computed:{client(){return localStorage.getItem("client")}}};var F=a(2807),S=a(3999),N=a(124),L=a(5173),O=a(3796),J=a(2374),Q=a(8582),X=a.n(Q);const q=(0,F.A)(W,[["render",w],["__scopeId","data-v-2591646c"]]),C=q;X()(W,"components",{QList:S.A,QItem:N.A,QItemSection:L.A,QItemLabel:O.A,QBtn:J.A});const I={name:"MapboxTerrainHillshade",components:{MapPopup:C},data(){return{clickCount:0,mapbox:null,currentLocation:[],hillshadeVisible:!0,is3D:!1,buildingsVisible:!1,markers:[],rows:[],dialog:{open:!1,payload:null},flood:{visible:!0,url:"https://api.wehlo.rwebcloud.app/flood-geojson",sourceId:"floodzones-source",fillLayerId:"floodzones-fill",lineLayerId:"floodzones-outline",fillColor:"#1e88e5",fillOpacity:.35,lineColor:"#0d47a1",lineWidth:1},menu:{show:!1,map:{style:"mapbox://styles/mapbox/streets-v12",drawer:!1,options:[{label:"Streets",image:"streets.png",value:"mapbox://styles/mapbox/streets-v12",color:"primary"},{label:"Outdoors",image:"outdoors.png",value:"mapbox://styles/mapbox/outdoors-v12",color:"primary"},{label:"Light",image:"light.png",value:"mapbox://styles/mapbox/light-v11",color:"primary"},{label:"Dark",image:"dark.png",value:"mapbox://styles/mapbox/dark-v11",color:"primary"},{label:"Satellite",image:"satellite.png",value:"mapbox://styles/mapbox/satellite-v9",color:"primary"},{label:"Satellite Streets",image:"satellite-streets.png",value:"mapbox://styles/mapbox/satellite-streets-v12",color:"primary"},{label:"Navigation Day",image:"navigation-day.png",value:"mapbox://styles/mapbox/navigation-day-v1",color:"primary"},{label:"Navigation Night",image:"navigation-night.png",value:"mapbox://styles/mapbox/navigation-night-v1",color:"primary"}]},sensors:{selected:"all",drawer:!1,options:["all"]}},search:{dialog:!1,rows:[],filter:"",range:{min:0,max:50}}}},mounted(){this.getSearchResults();const e=JSON.parse(this.client||"{}"),t=["soil_moisture","soil_temperature","soil_electrical_conductivity","air_temperature","air_humidity","air_pressure","rain_gauge","wind_speed","hurricane_severity_index","evapotranspiration_rate","heat_index","visibility","storm_surge","water_level","water_flow","battery"];t.forEach((t=>{e[t]&&this.menu.sensors.options.push(t)})),this.index(),(0,r.wB)((()=>this.dialog.open),(e=>{if(!this.mapbox)return;const t=()=>{this.mapbox.scrollZoom.enable(),this.mapbox.boxZoom.enable(),this.mapbox.dragRotate.enable(),this.mapbox.keyboard.enable(),this.mapbox.doubleClickZoom.enable(),this.mapbox.touchZoomRotate.enable(),this.mapbox.dragPan.enable()},a=()=>{this.mapbox.scrollZoom.disable(),this.mapbox.boxZoom.disable(),this.mapbox.dragRotate.disable(),this.mapbox.keyboard.disable(),this.mapbox.doubleClickZoom.disable(),this.mapbox.touchZoomRotate.disable(),this.mapbox.dragPan.disable()};e?a():t()}))},methods:{open(e){this.menu.map.drawer=!1,this.search.drawer=!1,this.menu.sensors.drawer=!1,"map"===e&&(this.menu.map.drawer=!0),"search"===e&&(this.search.drawer=!0),"sensors"===e&&(this.menu.sensors.drawer=!0)},addFloodzones(){this.mapbox&&!this.mapbox.getSource(this.flood.sourceId)&&(this.mapbox.addSource(this.flood.sourceId,{type:"geojson",data:this.flood.url}),this.mapbox.addLayer({id:this.flood.fillLayerId,type:"fill",source:this.flood.sourceId,layout:{visibility:this.flood.visible?"visible":"none"},paint:{"fill-color":this.flood.fillColor,"fill-opacity":this.flood.fillOpacity}}),this.mapbox.addLayer({id:this.flood.lineLayerId,type:"line",source:this.flood.sourceId,layout:{visibility:this.flood.visible?"visible":"none"},paint:{"line-color":this.flood.lineColor,"line-width":this.flood.lineWidth}}),this.mapbox.on("click",this.flood.fillLayerId,(e=>{const t=e.features?.[0];if(!t)return;const a=t.properties||{},r=Object.entries(a).map((([e,t])=>`<tr><td style="padding:4px 8px">${e}</td><td style="padding:4px 8px"><b>${t}</b></td></tr>`)).join("");(new(v().Popup)).setLngLat(e.lngLat).setHTML(`<div style="min-width:220px"><div class="text-subtitle2 q-mb-xs">Flood Zone</div><table>${r}</table></div>`).addTo(this.mapbox)})),this.mapbox.on("mouseenter",this.flood.fillLayerId,(()=>{this.mapbox.getCanvas().style.cursor="pointer"})),this.mapbox.on("mouseleave",this.flood.fillLayerId,(()=>{this.mapbox.getCanvas().style.cursor=""})))},removeFloodzones(){if(!this.mapbox)return;const{fillLayerId:e,lineLayerId:t,sourceId:a}=this.flood;this.mapbox.getLayer(e)&&this.mapbox.removeLayer(e),this.mapbox.getLayer(t)&&this.mapbox.removeLayer(t),this.mapbox.getSource(a)&&this.mapbox.removeSource(a)},toggleFloodzones(){this.mapbox&&(this.flood.visible=!this.flood.visible,[this.flood.fillLayerId,this.flood.lineLayerId].forEach((e=>{this.mapbox.getLayer(e)&&this.mapbox.setLayoutProperty(e,"visibility",this.flood.visible?"visible":"none")})))},openDialog(e){this.dialog.payload=e,this.dialog.open=!0},attachMarkerHandlers(e,t){e.style.cursor="pointer",e.addEventListener("click",(()=>this.openDialog(t))),e.tabIndex=0,e.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||this.openDialog(t)}))},updateSensor(){document.querySelectorAll(".marker").forEach((e=>e.remove())),this.rows.forEach((e=>{let t="x",a="x";const r=e.latest_record||{},l=this.menu.sensors.selected,i=e=>r[e]?JSON.parse(r[e]).img:"url(/icons/favicon-128x128.png)";"soil_moisture"===l&&(t=i("soil_moisture_category"),a=r.soil_moisture?r.soil_moisture+""+JSON.parse(r.soil_moisture_category).unit:0),"soil_temperature"===l&&(t=i("soil_temperature_category"),a=r.soil_temperature?r.soil_temperature+""+JSON.parse(r.soil_temperature_category).unit:0),"soil_electrical_conductivity"===l&&(t=i("soil_electrical_conductivity_category"),a=r.soil_electrical_conductivity?r.soil_electrical_conductivity+""+JSON.parse(r.soil_electrical_conductivity_category).unit:0),"air_temperature"===l&&(t=i("air_temperature_category"),a=r.air_temperature?r.air_temperature+""+JSON.parse(r.air_temperature_category).unit:0),"air_humidity"===l&&(t=i("air_humidity_category"),a=r.air_humidity?r.air_humidity+""+JSON.parse(r.air_humidity_category).unit:0),"air_pressure"===l&&(t=i("air_pressure_category"),a=r.air_pressure?r.air_pressure+""+JSON.parse(r.air_pressure_category).unit:0),"rain_gauge"===l&&(t=i("rain_gauge_category"),a=r.rain_gauge?r.rain_gauge+""+JSON.parse(r.rain_gauge_category).unit:0),"wind_speed"===l&&(t=i("wind_speed_category"),a=r.wind_speed?r.wind_speed+""+JSON.parse(r.wind_speed_category).unit:0),"hurricane_severity_index"===l&&(t=i("hurricane_severity_index_category"),a=r.hurricane_severity_index?r.hurricane_severity_index+""+JSON.parse(r.hurricane_severity_index_category).unit:0),"evapotranspiration_rate"===l&&(t=i("evapotranspiration_rate_category"),a=r.evapotranspiration_rate?r.evapotranspiration_rate+""+JSON.parse(r.evapotranspiration_rate_category).unit:0),"heat_index"===l&&(t=i("heat_index_category"),a=r.heat_index?r.heat_index+""+JSON.parse(r.heat_index_category).unit:0),"visibility"===l&&(t=i("visibility_category"),a=r.visibility?r.visibility+""+JSON.parse(r.visibility_category).unit:0),"storm_surge"===l&&(t=i("storm_surge_category"),a=r.storm_surge?r.storm_surge+""+JSON.parse(r.storm_surge_category).unit:0),"water_level"===l&&(t=i("water_level_category"),a=r.water_level?r.water_level+""+JSON.parse(r.water_level_category).unit:0),"water_flow"===l&&(t=i("water_flow_category"),a=r.water_flow?r.water_flow+""+JSON.parse(r.water_flow_category).unit:0),"battery"===l&&(t=i("battery_category"),a=r.battery?r.battery+""+JSON.parse(r.battery_category).unit:0),console.log(a),console.log(r.soil_moisture);const o=document.createElement("div");if(o.className="marker",o.style.backgroundImage="x"===t||null==t?"url(/icons/favicon-128x128.png)":`url(/category/${t})`,o.style.width="x"===t?"100px":"75px",o.style.height="x"===t?"100px":"75px",o.style.backgroundSize="cover","all"!==l){const e=document.createElement("div");e.className="marker-label",e.innerText=a,e.style.position="absolute",e.style.bottom="-30px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.color="#fff",e.style.fontSize="12px",e.style.fontWeight="bold",e.style.background="rgba(0,0,0,0.5)",e.style.padding="2px 4px",e.style.borderRadius="4px",o.appendChild(e)}new(v().Marker)(o).setLngLat([e.lng,e.lat]).addTo(this.mapbox),this.attachMarkerHandlers(o,e)}))},async index(){this.$api.get("app/dashboard",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((async e=>{this.rows=e.data.devices||[],this.markers=[],this.rows.forEach((e=>{this.$echo.channel("device-"+e.uuid).listen("LatestSensorData",(t=>{const a=this.rows.find((t=>t.uuid===e.uuid));a&&(a.latest_record=t.message)}))})),v().accessToken="pk.eyJ1IjoicndlYnNvbHV0aW9ucyIsImEiOiJjbTl3YTBzdncwdDN4MmtvcGM4NDN5eWY0In0.xFLIS1BaTt8wHu8y0_SeYg";const t=await k.L.getCurrentPosition();this.currentLocation=[t.coords.longitude,t.coords.latitude],this.mapbox=new(v().Map)({container:this.$refs.mapContainer,style:this.menu.map.style,center:[t.coords.longitude,t.coords.latitude],zoom:10,pitch:0,bearing:0,antialias:!0}),this.mapbox.on("load",(()=>{this.rows.forEach((e=>{const t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(/icons/favicon-128x128.png)",t.style.width="100px",t.style.height="100px",t.style.backgroundSize="cover",new(v().Marker)(t).setLngLat([e.lng,e.lat]).addTo(this.mapbox),this.attachMarkerHandlers(t,e)})),this.mapbox.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14}),this.mapbox.addLayer({id:"hillshade-layer",type:"hillshade",source:"mapbox-dem",layout:{visibility:"visible"},paint:{"hillshade-exaggeration":.5}}),this.mapbox.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.mapbox.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}}),this.mapbox.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,layout:{visibility:"none"},paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","min_height"],"fill-extrusion-opacity":.6}}),this.addFloodzones()}))}))},dateReformat(e){return f.Ay.formatDate(e,"MMM DD, YYYY - h:mm a")},reformatLabel(e){return e.replaceAll("_"," ").toUpperCase()},changeStyle(){this.mapbox&&(this.mapbox.setStyle(this.menu.map.style),this.mapbox.once("styledata",(()=>{this.mapbox.once("idle",(()=>{this.mapbox.getSource("mapbox-dem")||(this.mapbox.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14}),this.mapbox.addLayer({id:"hillshade-layer",type:"hillshade",source:"mapbox-dem",layout:{visibility:this.hillshadeVisible?"visible":"none"},paint:{"hillshade-exaggeration":.5}}),this.mapbox.setTerrain({source:"mapbox-dem",exaggeration:1.5}),this.mapbox.getLayer("sky")||this.mapbox.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})),this.mapbox.getLayer("3d-buildings")||this.mapbox.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,layout:{visibility:this.buildingsVisible?"visible":"none"},paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","min_height"],"fill-extrusion-opacity":.6}}),this.flood.visible&&!this.mapbox.getSource(this.flood.sourceId)&&this.addFloodzones(),this.updateSensor()}))})))},togglePitch(){this.mapbox&&(this.is3D=!this.is3D,this.mapbox.easeTo({pitch:this.is3D?60:0,duration:1e3}))},toggleBuildings(){this.mapbox.getLayer("3d-buildings")&&(this.buildingsVisible=!this.buildingsVisible,this.mapbox.setLayoutProperty("3d-buildings","visibility",this.buildingsVisible?"visible":"none"))},toggleHillshade(){if(!this.mapbox.getLayer("hillshade-layer"))return;const e=this.mapbox.getLayoutProperty("hillshade-layer","visibility"),t="visible"===e?"none":"visible";this.mapbox.setLayoutProperty("hillshade-layer","visibility",t),this.hillshadeVisible="visible"===t},getSearchResults(){this.$api.get("/cms/centers",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((e=>{this.search.rows=e.data}))}},computed:{client(){return localStorage.getItem("client")},filteredSearch(){return this.search.filter?this.search.rows.filter((e=>e.name.toLowerCase().includes(this.search.filter.toLowerCase()))):this.search.rows}}};var V=a(7716),A=a(3718),z=a(4782),D=a(284),E=a(2156),M=a(3316),T=a(4189),P=a(3676),U=a(386),R=a(6056),B=a(8958),H=a(7878),Z=a(492),Y=a(9270),$=a(137),j=a(2665),K=a(9626);const G=(0,F.A)(I,[["render",b],["__scopeId","data-v-96ac3d6a"]]),ee=G;X()(I,"components",{QPage:V.A,QPageSticky:A.A,QFab:z.A,QFabAction:D.A,QDialog:E.A,QCard:M.A,QCardSection:T.A,QSpace:P.A,QBtn:J.A,QSeparator:U.A,QDrawer:R.A,QScrollArea:B.A,QItem:N.A,QItemSection:L.A,QRadio:H.A,QItemLabel:O.A,QIcon:Z.A,QInput:Y.A,QRange:$.A,QList:S.A,QImg:j.A}),X()(I,"directives",{Ripple:K.A})}}]);